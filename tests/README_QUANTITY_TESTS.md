# Quantity计算逻辑测试

简洁的quantity计算功能测试，与serial/carton测试风格保持一致。

## 📋 测试文件

### 1. 核心测试 (`test_quantity_quick.py`)
**风格**: 简洁函数式测试，与 `test_serial_quick.py` 和 `test_carton_logic_fixed.py` 保持一致

**测试覆盖**:
- ✅ **小箱quantity计算**: 基本的盒数×张/盒计算
- ✅ **大箱quantity计算(无套)**: 传统均匀分配模式
- ✅ **大箱quantity计算(套盒)**: 一套分多箱模式，与serial分配逻辑一致
- ✅ **边界情况**: 最后容器不完整盒数、超出范围处理
- ✅ **一致性验证**: 大箱与小箱quantity计算一致性
- ✅ **性能基准**: 简单的计算性能验证

### 2. 快速验证 (`test_quantity_quick_validation.py`) 
**用途**: 开发时的快速验证工具，保留用于日常开发调试

## 🚀 运行测试

### 快速核心测试
```bash
# 运行核心quantity测试
python tests/test_quantity_quick.py

# 运行快速验证
python tests/test_quantity_quick_validation.py
```

### 测试内容

**核心功能验证**:
- 小箱#1: 2盒 × 730张/盒 = 1460张
- 大箱#1 (无套): 8盒 × 730张/盒 = 5840张
- 大箱#2 (套盒): 7盒 × 730张/盒 = 5110张 (完成第一套)

**边界情况验证**:
- 最后容器不完整盒数处理
- 超出范围容器返回0
- 用户实际场景验证 (730张/盒, 15盒/套, 8盒/大箱)

**性能验证**:
- 1000次计算 > 1000次/秒

## 🔧 设计理念

### 简洁高效
- **单文件测试**: 核心功能集中在一个文件中 (~120行)
- **函数式风格**: 简单的函数测试，易于理解和维护
- **快速执行**: 几秒内完成所有测试

### 聚焦核心
- **关键功能**: 专注测试最重要的quantity计算逻辑
- **真实场景**: 基于用户实际使用情况设计测试用例
- **质量保证**: 确保quantity计算与serial分配逻辑一致

### 风格统一
- **与项目一致**: 与serial/carton测试保持相同的风格和结构
- **易于扩展**: 可以轻松添加新的测试用例
- **清晰输出**: 友好的测试结果显示

## 📊 与旧测试对比

**旧量测试** (已删除):
- 4个独立文件，总计1848行
- 复杂的unittest框架
- 专门的测试运行器
- 过度工程化

**新测试**:
- 2个文件，总计~280行
- 简洁的函数式测试
- 直接运行，无需运行器
- 聚焦核心功能

## ✅ 质量保证

这个简化的测试套件确保：
- **功能正确性**: 所有quantity计算符合 "盒数 × 箱中盒数" 的逻辑
- **架构一致性**: quantity计算与serial分配逻辑保持一致
- **边界安全性**: 正确处理各种边界情况
- **维护便利性**: 代码变更可以快速验证
- **风格统一性**: 与项目其他测试保持一致的风格